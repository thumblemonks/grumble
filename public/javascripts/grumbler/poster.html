<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>Poster</title>
  <script src="http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.3/prototype.js" type="text/javascript" charset="utf-8"></script>

  <script type="text/javascript" charset="utf-8">
    var postGrumbles = new Template('/targets/#{target}/grumbles');
    var passedData = window.name.evalJSON();

    new Ajax.Request(postGrumbles.evaluate({target: passedData.target}), {
      method: 'post', parameters: passedData.grumbleData,
      onComplete: function(transport) {
        window.name = '//'+passedData.doneName+';\n'+Object.toJSON(transport.responseText.evalJSON());
        var newLoc = (decodeURIComponent(passedData.target).split('/', 3).concat(['favicon.ico#grumbleDone'])).join('/');
alert(window.name)
alert(newLoc)
        window.location = newLoc;
      }
    });
  </script>
</head>
<body>
<h1>Hi</h1>
</body>
</html>
